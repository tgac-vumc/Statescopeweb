"use strict";(self.webpackChunkStatescope=self.webpackChunkStatescope||[]).push([[7443],{3588:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>l,default:()=>x,frontMatter:()=>i,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"api-reference","title":"Statescope API Reference","description":"1 \xb7 Construction helpers","source":"@site/docs/api-reference.md","sourceDirName":".","slug":"/api-reference","permalink":"/Statescopeweb/docs/api-reference","draft":false,"unlisted":false,"editUrl":"https://github.com/tgac-vumc/Statescopeweb.git/docs/api-reference.md","tags":[],"version":"current","frontMatter":{"id":"api-reference","title":"Statescope API Reference","sidebar_label":"API Reference"},"sidebar":"tutorialSidebar","previous":{"title":"R","permalink":"/Statescopeweb/docs/r"},"next":{"title":"Troubleshooting","permalink":"/Statescopeweb/docs/troubleshooting"}}');var t=n(4848),d=n(8453);const i={id:"api-reference",title:"Statescope API Reference",sidebar_label:"API Reference"},l=void 0,c={},h=[{value:"1 \xb7 Construction helpers",id:"1--construction-helpers",level:2},{value:"<code>Initialize_Statescope</code>",id:"initialize_statescope",level:3},{value:"2 \xb7 Core class \u2014 <code>Statescope</code>",id:"2--core-class--statescope",level:2},{value:"2.1 Deconvolution <a></a>",id:"21-deconvolution-",level:3},{value:"2.2 Refinement <a></a>",id:"22-refinement-",level:3},{value:"2.3 State discovery <a></a>",id:"23-state-discovery-",level:3},{value:"3 \xb7 Utility helpers",id:"3--utility-helpers",level:2},{value:"4 \xb7 Plotting helpers",id:"4--plotting-helpers",level:2},{value:"5 \xb7 Mini cheat-sheet",id:"5--mini-cheat-sheet",level:2}];function o(e){const s={code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h2,{id:"1--construction-helpers",children:"1 \xb7 Construction helpers"}),"\n",(0,t.jsx)(s.h3,{id:"initialize_statescope",children:(0,t.jsx)(s.code,{children:"Initialize_Statescope"})}),"\n",(0,t.jsxs)(s.p,{children:["Initialise a ",(0,t.jsx)(s.strong,{children:"Statescope"})," model \u2014 ",(0,t.jsx)(s.strong,{children:"always"})," your first call."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Bulk"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"pd.DataFrame"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"required"})}),(0,t.jsx)(s.td,{children:"Linear counts, library-size corrected to 10 k per sample."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Signature"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"pd.DataFrame"})," | ",(0,t.jsx)(s.code,{children:"AnnData"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsxs)(s.td,{children:["Custom single-cell signature. When ",(0,t.jsx)(s.strong,{children:"None"}),", a pre-built signature is downloaded (see ",(0,t.jsx)(s.strong,{children:"TumorType"}),"/",(0,t.jsx)(s.strong,{children:"Ncelltypes"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"TumorType"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"str"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"(empty)"})}),(0,t.jsxs)(s.td,{children:["Folder key for a pre-built signature (e.g. ",(0,t.jsx)(s.strong,{children:"NSCLC"}),", ",(0,t.jsx)(s.strong,{children:"PDAC"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Ncelltypes"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"int"})," | ",(0,t.jsx)(s.code,{children:"(empty)"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"(empty)"})}),(0,t.jsx)(s.td,{children:"Choose one of the available cell-type resolutions."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"MarkerList"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"list[str]"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsxs)(s.td,{children:["Use ",(0,t.jsx)(s.strong,{children:"only"})," these genes as markers instead of running AutoGeneS."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"celltype_key"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"str"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"celltype"})}),(0,t.jsxs)(s.td,{children:["Column holding cell-type labels inside an ",(0,t.jsx)(s.code,{children:"AnnData"})," signature."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"n_highly_variable"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"int"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"3000"})}),(0,t.jsxs)(s.td,{children:["How many HVGs AutoGeneS should receive (",(0,t.jsx)(s.em,{children:"None"})," \u2192 let AutoGeneS decide)."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"fixed_n_features"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"int"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsx)(s.td,{children:"Hard cap on the number of marker genes selected by AutoGeneS."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"drop_sigdiff"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"bool"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"False"})}),(0,t.jsxs)(s.td,{children:["If ",(0,t.jsx)(s.strong,{children:"True"}),", drop genes with large bulk vs scRNA-seq expression differences."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Ncores"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10"})}),(0,t.jsx)(s.td,{children:"Maximum parallel workers passed down to BLADE / cNMF."})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.strong,{children:"Returns"})," \u2192 a fully initialised ",(0,t.jsx)(s.strong,{children:"Statescope"})," object."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h2,{id:"2--core-class--statescope",children:["2 \xb7 Core class \u2014 ",(0,t.jsx)(s.code,{children:"Statescope"})]}),"\n",(0,t.jsxs)(s.h3,{id:"21-deconvolution-",children:["2.1 Deconvolution ",(0,t.jsx)("a",{id:"statescope-Deconvolution"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"Statescope.Deconvolution(\n    Ind_Marker=None,\n    Alpha=1, Alpha0=1000, Kappa0=1, sY=1,\n    Nrep=10, Njob=10, fsel=0, Update_SigmaY=False,\n    Init_Trust=10, Expectation=None,\n    Temperature=None, IterMax=100,\n)\n"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Ind_Marker"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"list[int]"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsxs)(s.td,{children:["Explicit marker-gene indices to ",(0,t.jsx)(s.strong,{children:"force"})," into the model."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Alpha"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"1"})}),(0,t.jsx)(s.td,{children:"Dirichlet prior on cell-type fractions."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Alpha0"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"1000"})}),(0,t.jsx)(s.td,{children:"Prior on gene-level means."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Kappa0"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"1"})}),(0,t.jsx)(s.td,{children:"Prior on gene-level variances."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"sY"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"1"})}),(0,t.jsx)(s.td,{children:"Prior scaling of bulk variance."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Nrep"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10"})}),(0,t.jsx)(s.td,{children:"Random BLADE restarts (best objective kept)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Njob"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10"})}),(0,t.jsxs)(s.td,{children:["Parallel jobs (capped at ",(0,t.jsx)(s.strong,{children:"Ncores"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"fsel"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"0"})}),(0,t.jsx)(s.td,{children:"Marker-subset selection flag (experimental)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Update_SigmaY"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"bool"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"False"})}),(0,t.jsxs)(s.td,{children:["Re-estimate \u03a3",(0,t.jsx)("sub",{children:"Y"})," every EM step."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Init_Trust"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10"})}),(0,t.jsxs)(s.td,{children:["Weight of fraction ",(0,t.jsx)(s.em,{children:"priors"})," when provided."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Expectation"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"pd.DataFrame"})," | ",(0,t.jsx)(s.code,{children:"dict"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsxs)(s.td,{children:["Prior fractions (cell-level DF) ",(0,t.jsx)(s.strong,{children:"or"})," grouped dict ",(0,t.jsx)(s.code,{children:'{"Group": \u2026, "Expectation": \u2026}'}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Temperature"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"[float,float]"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsx)(s.td,{children:"Start/stop temperatures for simulated annealing."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"IterMax"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"100"})}),(0,t.jsx)(s.td,{children:"Upper limit on optimisation iterations."})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["Adds ",(0,t.jsx)(s.strong,{children:"Fractions"})," and ",(0,t.jsx)(s.strong,{children:"BLADE"})," fields to the object."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h3,{id:"22-refinement-",children:["2.2 Refinement ",(0,t.jsx)("a",{id:"statescope-Refinement"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:"Statescope.Refinement(weight=100, GeneList=None)\n"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"weight"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"100"})}),(0,t.jsx)(s.td,{children:"Down-weights the fraction objective when purifying expression."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"GeneList"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"list[str]"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsx)(s.td,{children:"Restrict refinement to this gene subset."})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["Adds ",(0,t.jsx)(s.strong,{children:"GEX"}),", ",(0,t.jsx)(s.strong,{children:"Omega"})," and ",(0,t.jsx)(s.strong,{children:"BLADE_final"}),"."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsxs)(s.h3,{id:"23-state-discovery-",children:["2.3 State discovery ",(0,t.jsx)("a",{id:"statescope-StateDiscovery"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'Statescope.StateDiscovery(\n    celltype=None,\n    K=None,\n    weighing="Omega",\n    n_iter=10,\n    n_final_iter=100,\n    min_cophenetic=0.9,\n    max_clusters=10,\n)\n'})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"celltype"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"str"})," | ",(0,t.jsx)(s.code,{children:"list[str]"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsxs)(s.td,{children:["Which cell types to analyse (",(0,t.jsx)(s.strong,{children:"None"})," \u2192 all)."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"K"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"int"})," | ",(0,t.jsx)(s.code,{children:"list[int]"})," | ",(0,t.jsx)(s.code,{children:"dict[str,int]"})," | ",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"None"})}),(0,t.jsxs)(s.td,{children:["Fixed ",(0,t.jsx)(s.em,{children:"k"})," per cell type (",(0,t.jsx)(s.strong,{children:"None"})," = auto)."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"weighing"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"str"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Omega"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:'"Omega"'})," | ",(0,t.jsx)(s.code,{children:'"OmegaFractions"'})," | ",(0,t.jsx)(s.code,{children:'"centering"'})," | ",(0,t.jsx)(s.code,{children:'"no_weighing"'}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"n_iter"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10"})}),(0,t.jsx)(s.td,{children:"Initial random restarts for cNMF."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"n_final_iter"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"100"})}),(0,t.jsxs)(s.td,{children:["Additional restarts for the chosen ",(0,t.jsx)(s.em,{children:"k"}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"min_cophenetic"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"float"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"0.9"})}),(0,t.jsxs)(s.td,{children:["Cut-off to accept a candidate ",(0,t.jsx)(s.em,{children:"k"}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"max_clusters"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"int"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"10"})}),(0,t.jsxs)(s.td,{children:["Upper bound when searching for ",(0,t.jsx)(s.em,{children:"k"}),"."]})]})]})]}),"\n",(0,t.jsxs)(s.p,{children:["Adds ",(0,t.jsx)(s.strong,{children:"StateScores"}),", ",(0,t.jsx)(s.strong,{children:"StateLoadings"}),", ",(0,t.jsx)(s.strong,{children:"cNMF"}),", ",(0,t.jsx)(s.strong,{children:"CopheneticCoefficients"}),"."]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"3--utility-helpers",children:"3 \xb7 Utility helpers"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Function"}),(0,t.jsx)(s.th,{children:"Parameters"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Extract_GEX(model, celltype)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"celltype"})," :",(0,t.jsx)(s.code,{children:"str"})]}),(0,t.jsx)(s.td,{children:"Return purified expression (samples \xd7 genes) for one cell type."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Extract_StateScores(model, celltype=None)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"celltype"})," :",(0,t.jsx)(s.code,{children:"str"}),"|",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:"Concatenate all state-score matrices or just one cell type."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Extract_StateLoadings(model, celltype=None)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"celltype"})," :",(0,t.jsx)(s.code,{children:"str"}),"|",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:"Return gene-loading matrix (all states or one ct)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Create_Cluster_Matrix(GEX, Omega, Fractions, celltype, weighing=Omega)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"weighing"})," options above"]}),(0,t.jsx)(s.td,{children:"Build the scaled matrix used by clustering / t-SNE."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Check_Bulk_Format(Bulk)"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsx)(s.td,{children:"Assert / repair bulk matrix (10 k normalisation, duplicates, negatives)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Check_Signature_validity(Signature)"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsxs)(s.td,{children:["Ensure the ",(0,t.jsx)(s.code,{children:"IsMarker"})," column exists when passing a DF."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Check_Expectation_validity(Expectation, \u2026)"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsx)(s.td,{children:"Validate prior fraction matrices or grouped priors."})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"4--plotting-helpers",children:"4 \xb7 Plotting helpers"}),"\n",(0,t.jsxs)(s.p,{children:["All functions draw directly with ",(0,t.jsx)(s.strong,{children:"matplotlib"})," + ",(0,t.jsx)(s.strong,{children:"seaborn"}),"; nothing is returned."]}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Function"}),(0,t.jsx)(s.th,{children:"Key parameters"}),(0,t.jsx)(s.th,{children:"What you get"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Heatmap_Fractions(model)"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsx)(s.td,{children:"Clustered heat-map of sample \xd7 cell-type fractions."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Heatmap_GEX(model, celltype)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"celltype"})," :",(0,t.jsx)(s.code,{children:"str"})]}),(0,t.jsx)(s.td,{children:"Heat-map of purified expression for a single cell type."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Heatmap_StateScores(model, col_width=0.35, \u2026)"})}),(0,t.jsx)(s.td,{children:"Autoscale & labelled"}),(0,t.jsx)(s.td,{children:"State-score heat-map with state numbers colour-boxed."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Heatmap_StateLoadings(model, top_genes=None)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"top_genes"})," :",(0,t.jsx)(s.code,{children:"int"}),"|",(0,t.jsx)(s.code,{children:"None"})]}),(0,t.jsx)(s.td,{children:"Gene \xd7 state loadings, grouped by cell type."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"Plot_CopheneticCoefficients(model)"})}),(0,t.jsx)(s.td,{children:"\u2014"}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.em,{children:"k"})," vs cophenetic coefficient (red dot = chosen ",(0,t.jsx)(s.em,{children:"k"}),")."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"BarPlot_StateLoadings(model, top_genes=1)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"top_genes"})," :",(0,t.jsx)(s.code,{children:"int"})]}),(0,t.jsx)(s.td,{children:"Horizontal bars; annotate top genes per state."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"TSNE_AllStates(model, weighing=Omega, perplexity=5, \u2026)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"show_samples"})," :",(0,t.jsx)(s.code,{children:"bool"})," etc."]}),(0,t.jsx)(s.td,{children:"Global t-SNE with dominant state numbers inside dots."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"TSNE_CellTypes(model, celltype=None, weighing=Omega, \u2026)"})}),(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.strong,{children:"show_samples"})," :",(0,t.jsx)(s.code,{children:"bool"})," etc."]}),(0,t.jsx)(s.td,{children:"Per-cell-type t-SNE; prints sample names optionally."})]})]})]}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.strong,{children:"Common t-SNE parameters"})}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Name"}),(0,t.jsx)(s.th,{children:"Default"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"perplexity"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"5"})}),(0,t.jsxs)(s.td,{children:["Auto-capped at ",(0,t.jsx)(s.em,{children:"n samples \u2013 1"}),"."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"n_iter"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"1000"})}),(0,t.jsx)(s.td,{children:"Gradient-descent steps."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"point_size"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"80 / 150"})}),(0,t.jsx)(s.td,{children:"Scatter-marker size (global / per-ct)."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"random_state"})}),(0,t.jsx)(s.td,{children:(0,t.jsx)(s.strong,{children:"42"})}),(0,t.jsx)(s.td,{children:"Re-producible layout."})]})]})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"5--mini-cheat-sheet",children:"5 \xb7 Mini cheat-sheet"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-python",children:'model = Initialize_Statescope(Bulk_df, TumorType="NSCLC")\nmodel.Deconvolution()\nmodel.Refinement()\nmodel.StateDiscovery(K=3)      # force k = 3 everywhere\n\nHeatmap_Fractions(model)\nHeatmap_StateScores(model)\nTSNE_AllStates(model, show_samples=True)\n'})})]})}function x(e={}){const{wrapper:s}={...(0,d.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>l});var r=n(6540);const t={},d=r.createContext(t);function i(e){const s=r.useContext(d);return r.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(d.Provider,{value:s},e.children)}}}]);